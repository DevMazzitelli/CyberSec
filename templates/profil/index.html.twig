{% extends 'base.html.twig' %}

{% block title %}Mon profil{% endblock %}

{% block body %}

    {% block nav %}

        <section class="fond fixed top-0 w-screen bg-transparent z-50">
            <nav class="relative px-4 py-4 flex justify-between items-center bg-fond z-20">
                <a class="text-3xl font-bold leading-none" href="{{ path('app_home') }}">
                    <img class="w-14 h-14" src="{{ asset('medias/images/logo_cs-removebg-preview.png') }}" alt="Logo entreprise">
                </a>
                <div class="lg:hidden">
                    <button class="navbar-burger flex items-center text-blue-600 p-3">
                        <svg class="block h-4 w-4 fill-current" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                            <title>Mobile menu</title>
                            <path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"></path>
                        </svg>
                    </button>
                </div>
                <ul class="hidden absolute top-1/2 left-1/2 transform -translate-y-1/2 -translate-x-1/2 lg:flex lg:mx-auto lg:flex lg:items-center lg:w-auto lg:space-x-6">
                    <li><a class="text-sm text-gray-400 hover:text-gray-500" href="{{ path('app_documentation') }}">Documentations</a></li>
                    <li class="text-gray-300">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" class="w-4 h-4 current-fill" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v0m0 7v0m0 7v0m0-13a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z" />
                        </svg>
                    </li>
                    <li><a class="text-sm text-gray-400 hover:text-gray-500" href="{{ path('app_cours') }}">Cours</a></li>
                    <li class="text-gray-300">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" class="w-4 h-4 current-fill" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v0m0 7v0m0 7v0m0-13a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z" />
                        </svg>
                    </li>
                    <li><a class="text-sm text-gray-400 hover:text-gray-500" href="{{ path('app_abonnement') }}">Abonnement</a></li>
                    <li class="text-gray-300">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" class="w-4 h-4 current-fill" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v0m0 7v0m0 7v0m0-13a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z" />
                        </svg>
                    </li>
                    <li><a class="text-sm text-gray-400 hover:text-gray-500" href="{{ path('app_contact') }}">Contact</a></li>
                    <li class="text-gray-300">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" class="w-4 h-4 current-fill" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v0m0 7v0m0 7v0m0-13a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z" />
                        </svg>
                    </li>
                    <li><a class="text-sm text-gray-400 hover:text-gray-500" href="{{ path('app_faq') }}">FAQ</a></li>
                </ul>
                {% if app.user %}
                    <a class="relative right-6 hidden lg:inline-block lg:ml-auto lg:mr-3 py-2 px-6 bg-gray-50 hover:bg-gray-100 text-sm text-gray-900 font-bold  rounded-xl transition duration-200" href="{{ path('app_logout') }}">Déconnexion</a>
                    <button type="button" class="flex items-center focus:outline-none" aria-label="toggle profile dropdown">
                        <div class="w-8 h-8 overflow-hidden border-2 border-gray-400 rounded-full">
                            <a href="{{ path('app_profile') }}">
                                <img  href='' src="https://images.unsplash.com/photo-1517841905240-472988babdf9?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=334&q=80" class="object-cover w-full h-full" alt="avatar">
                            </a>
                        </div>

                        <h3 class="mx-2 text-gray-700 dark:text-gray-200 lg:hidden">Khatab wedaa</h3>
                    </button>
                {% else %}
                    <a class="relative right-6 hidden lg:inline-block lg:ml-auto lg:mr-3 py-2 px-6 bg-gray-50 hover:bg-gray-100 text-sm text-gray-900 font-bold  rounded-xl transition duration-200" href="{{ path('app_login') }}">Connexion</a>
                    <a class="relative right-6 hidden lg:inline-block py-2 px-6 bg-blue-500 hover:bg-blue-600 text-sm text-white font-bold rounded-xl transition duration-200" href="{{ path('app_register') }}">S'inscrire</a>
                {% endif %}
            </nav>
        </section>
    {% endblock %}






    <section class="container mx-auto py-5 bg-gray-100 mt-8">
        <div class="flex flex-wrap -mx-4">
            <div class="w-full lg:w-1/3 px-4 mb-4 lg:mb-0">
                <div class="bg-white rounded-md shadow p-4 text-center">
                    <img src="{{ asset('/uploads/profile_pictures/' ~ app.user.profilePicture) }}" alt="avatar"
                         class="rounded-full w-36 mx-auto mb-4">
                    <h5 class="text-xl font-semibold mb-2">{{ infoUser.firstname }} {{ infoUser.lastname }}</h5>
                    <p class="text-gray-500 mb-1">{{ infoUser.email }}</p>
                    <div class="flex justify-center space-x-2">
                        <a href="{{ path('app_profil_modification') }}">
                            <button class="flex items-center bg-blue-600 hover:bg-blue-700 text-gray-100 px-4 py-2 rounded text-sm space-x-2 transition duration-100">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                                    <path d="M8 9a3 3 0 100-6 3 3 0 000 6zM8 11a6 6 0 016 6H2a6 6 0 016-6zM16 7a1 1 0 10-2 0v1h-1a1 1 0 100 2h1v1a1 1 0 102 0v-1h1a1 1 0 100-2h-1V7z"></path>
                                </svg>
                                <span>Modifier profil</span>
                            </button>
                        </a>
                    </div>
                </div>
            </div>

            <div class="w-full lg:w-2/3 px-4">
                <div class="bg-white rounded-md shadow p-4 mb-4">
                    <div class="mb-4">
                        <div class="flex">
                            <div class="w-1/3 text-gray-600">Prénom</div>
                            <div class="w-2/3 text-gray-700">{{ infoUser.firstname }}</div>
                        </div>
                        <hr class="my-2">
                        <div class="flex">
                            <div class="w-1/3 text-gray-600">Nom</div>
                            <div class="w-2/3 text-gray-700">{{ infoUser.lastname }}</div>
                        </div>

                        <hr class="my-2">
                        <div class="flex">
                            <div class="w-1/3 text-gray-600">Email</div>
                            <div class="w-2/3 text-gray-700">{{ infoUser.email }}</div>
                        </div>

                        <hr class="my-2">
                        <div class="flex">
                            <div class="w-1/3 text-gray-600">Address</div>
                            <div class="w-2/3 text-gray-700">{{ infoUser.address.rue }}</div>
                        </div>
                    </div>
                </div>

                <div class="flex flex-wrap -mx-2">
                    <div class="w-full md:w-1/2 px-2">
                        <div class="bg-white rounded-md shadow p-4">
                            <p class="mb-4 text-blue-600 font-semibold">Mon Abonnement</p>
                            <div class="flex">
                                <div class="w-1/3 text-gray-600">Abonnement</div>
                                <!-- Mettre l'abo de l'utilisateur -->
                                <div class="w-2/3 text-gray-700">{{ infoUser.subscriptionType }}</div>

                                    {% for order in order %}
                                        <div class="flex items-center w-full my-6 -ml-1.5">
                                            <div class="w-1/12 z-10">
                                                <div class="w-3.5 h-3.5 bg-blue-600 rounded-full"></div>
                                            </div>
                                            <div class="w-11/12">
                                                <div class="text-sm flex flex-row">
                                                    Commande n°{{ order.id }} - Montant : {{ order.total|number_format(2, '.', ',') }} €
                                                    <a href="{{ path('telecharger_facture', {'id_commande': order.id}) }}" class="ml-2" title="Télécharger votre facture">
                                                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="20" height="20" x="0" y="0" viewBox="0 0 471.2 471.2" xml:space="preserve" class=""><g><path d="M457.7 230.15c-7.5 0-13.5 6-13.5 13.5v122.8c0 33.4-27.2 60.5-60.5 60.5H87.5c-33.4 0-60.5-27.2-60.5-60.5v-124.8c0-7.5-6-13.5-13.5-13.5s-13.5 6-13.5 13.5v124.8c0 48.3 39.3 87.5 87.5 87.5h296.2c48.3 0 87.5-39.3 87.5-87.5v-122.8c0-7.4-6-13.5-13.5-13.5z" fill="#000000" opacity="1" data-original="#000000"></path><path d="M226.1 346.75c2.6 2.6 6.1 4 9.5 4s6.9-1.3 9.5-4l85.8-85.8c5.3-5.3 5.3-13.8 0-19.1-5.3-5.3-13.8-5.3-19.1 0l-62.7 62.8V30.75c0-7.5-6-13.5-13.5-13.5s-13.5 6-13.5 13.5v273.9l-62.8-62.8c-5.3-5.3-13.8-5.3-19.1 0-5.3 5.3-5.3 13.8 0 19.1l85.9 85.8z" fill="#000000" opacity="1" data-original="#000000"></path></g></svg>
                                                    </a>
                                                </div>
                                                <p class="text-xs text-gray-500">
                                                    Passée le {{ order.createdAt|date('d/m/Y')}}
                                                </p>
                                            </div>
                                        </div>
                                    {% endfor %}
                            </div>

                            <div class="flex justify-center mt-5">
                            <a href="{{ path('app_profil_modifabonnement') }}">
                                <button class="flex items-center bg-blue-600 hover:bg-blue-700 text-gray-100 px-4 py-2 rounded text-sm space-x-2 transition duration-100">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                                        <path d="M8 9a3 3 0 100-6 3 3 0 000 6zM8 11a6 6 0 016 6H2a6 6 0 016-6zM16 7a1 1 0 10-2 0v1h-1a1 1 0 100 2h1v1a1 1 0 102 0v-1h1a1 1 0 100-2h-1V7z"></path>
                                    </svg>
                                    <span>Modifier mon abonnement</span>
                                </button>
                            </a>

                                <a href="{{ path('telecharger_facture', {id_commande: 'ID_DE_LA_COMMANDE'}) }}" download>
                                    <button class="flex items-center bg-blue-600 hover:bg-blue-700 text-gray-100 px-4 py-2 rounded text-sm space-x-2 transition duration-100">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                                            <path d="M8 9a3 3 0 100-6 3 3 0 000 6zM8 11a6 6 0 016 6H2a6 6 0 016-6zM16 7a1 1 0 10-2 0v1h-1a1 1 0 100 2h1v1a1 1 0 102 0v-1h1a1 1 0 100-2h-1V7z"></path>
                                        </svg>
                                        <span>Télécharger la facture PDF</span>
                                    </button>
                                </a>
                            </div>


                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>


















































    <!--
    <div class="pt-16 w-full bg-gray-400 p-8">
        <div class="bg-white rounded-lg shadow-xl pb-8">
            <div class="flex flex-col items-center">
                {% if app.user %}
                    <img src="{{ asset('/uploads/profile_pictures/' ~ app.user.profilePicture) }}" class="w-40 border-4 border-white rounded-full" alt="user photo">
                {% endif %}
                <div class="flex items-center space-x-2 mt-2">
                    <p class="text-2xl">{{ infoUser.firstname }} {{ infoUser.lastname }}</p>
                    <span class="bg-blue-500 rounded-full p-1" title="Verified">
                            <svg xmlns="http://www.w3.org/2000/svg" class="text-gray-100 h-2.5 w-2.5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M5 13l4 4L19 7"></path>
                            </svg>
                        </span>
                </div>
            </div>
            <div class="flex-1 flex flex-col items-center lg:items-end justify-end px-8 mt-2">
                <div class="flex items-center space-x-4 mt-2">
                    <a href="">
                        <button class="flex items-center bg-red1 hover:bg-red-700 text-gray-100 px-4 py-2 rounded text-sm space-x-2 transition duration-100">
                            <svg xmlns="http://www.w3.org/2000/svg" height="16" width="14" viewBox="0 0 448 512"><path d="M135.2 17.7L128 32H32C14.3 32 0 46.3 0 64S14.3 96 32 96H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H320l-7.2-14.3C307.4 6.8 296.3 0 284.2 0H163.8c-12.1 0-23.2 6.8-28.6 17.7zM416 128H32L53.2 467c1.6 25.3 22.6 45 47.9 45H346.9c25.3 0 46.3-19.7 47.9-45L416 128z"/></svg>
                            <span>Supprimer profil</span>
                        </button>
                    </a>
                </div>
            </div>
        </div>

        <div class="my-4 flex flex-col 2xl:flex-row space-y-4 2xl:space-y-0 2xl:space-x-4">
            <div class="w-full flex flex-col 2xl:w-full">
                <div class="flex-1 bg-white rounded-lg shadow-xl p-8">
                    <h4 class="text-xl text-gray-900 font-bold">Information personnel :</h4>
                    <ul class="mt-2 text-gray-700">
                        <li class="flex border-y py-2">
                            <span class="font-bold w-26">Nom complet :</span>
                            <span class="text-gray-700 ml-1">{{ infoUser.firstname }} {{ infoUser.lastname }}</span>
                        </li>
                        <li class="flex border-b py-2">
                            <span class="font-bold w-24">Email :</span>
                            <span class="text-gray-700">{{ infoUser.email }}</span>
                        </li>
                        <li class="flex border-b py-2">
                            <span class="font-bold w-24">Langue(s) :</span>
                            <span class="text-gray-700">Francais</span>
                        </li>
                    </ul>

                    <div class="mt-4">
                        <a href="{{ path('app_profil_modification') }}">
                            <button class="flex items-center bg-blue-600 hover:bg-blue-700 text-gray-100 px-4 py-2 rounded text-sm space-x-2 transition duration-100">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                                    <path d="M8 9a3 3 0 100-6 3 3 0 000 6zM8 11a6 6 0 016 6H2a6 6 0 016-6zM16 7a1 1 0 10-2 0v1h-1a1 1 0 100 2h1v1a1 1 0 102 0v-1h1a1 1 0 100-2h-1V7z"></path>
                                </svg>
                                <span>Modifier profil</span>
                            </button>
                        </a>
                    </div>

                    <!--
                        <ul class="mt-4 text-gray-700">
                            <h4 class="text-xl text-gray-900 font-bold">Information de livraison :</h4>
                            // Boucle for sur adresse


                                <li class="flex border-b py-2">
                                    <span class="font-bold w-24">Rue :</span>
                                    <span class="text-gray-700">Pas d'infomations</span>
                                </li>
                                <li class="flex border-b py-2">
                                    <span class="font-bold w-24">Ville :</span>
                                    <span class="text-gray-700">Pas d'infomations</span>
                                </li>
                                <li class="flex border-b py-2">
                                    <span class="font-bold w-26">Code Postal :</span>
                                    <span class="text-gray-700 ml-1">Pas d'infomations</span>
                                </li>
                                <li class="flex border-b py-2">
                                    <span class="font-bold w-24">Pays :</span>
                                    <span class="text-gray-700">Pas d'infomations</span>
                                </li>
                        </ul>

                        /* S'il n'y a pas d'adresse de livraison afficher "Ajouter une adresse de livraison" sinon afficher "Modifier l'adresse de livraison" */
                        <div class="mt-4">
                           // Faire un if
                                <a href="">
                                    <button class="flex items-center bg-blue-600 hover:bg-blue-700 text-gray-100 px-4 py-2 rounded text-sm space-x-2 transition duration-100">
                                        <span>Ajouter une adresse de livraison</span>
                                    </button>
                                </a>
                            // Faire un else
                                <div class="flex gap-5">
                                    <a href="">
                                        <button class="flex items-center bg-blue-600 hover:bg-blue-700 text-gray-100 px-4 py-2 rounded text-sm space-x-2 transition duration-100">
                                            <span>Modifier l'adresse de livraison</span>
                                        </button>
                                    </a>

                                    <a href="">
                                        <button class="flex items-center bg-blue-600 hover:bg-blue-700 text-gray-100 px-4 py-2 rounded text-sm space-x-2 transition duration-100">
                                            <span>Consulter mon panier</span>
                                        </button>
                                    </a>
                                </div>

                            // Mettre le endif
                        </div>



                </div>
            </div>
            <div class="flex flex-col w-full 2xl:w-full">
                <div class="flex-1 bg-white rounded-lg shadow-xl p-8">
                    <h4 class="text-xl text-gray-900 font-bold">Mes commandes</h4>

                </div>
            </div>
        </div>
    </div>
    -->











{% endblock %}
